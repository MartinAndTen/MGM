@model GroupProjectRestaurangMVC01.ViewModels.RestaurantViewModel

@{
    ViewBag.Title = "Reservations";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Reservations</h2>
<div class="col-md-12">
    <strong><small>New reservations</small></strong>
    <table class="table table-striped table-responsive table-condensed">
        <tr>
            <th>
                Order Nr.
            </th>
            <th>
                Name
            </th>
            <th>
                Date
            </th>
            <th>
                Guest's
            </th>
            <th>
                Phone
            </th>
            <th>
                Email
            </th>
            <th>
                Cancel
            </th>
        </tr>

        @foreach (var reservation in Model.Restaurant.Reservations)
        {
            if (reservation.Date >= DateTime.Today)
            {
                <tr>
                    <td class="col-lg-1">
                        @Html.DisplayFor(modelItem => reservation.Id).ToString().Substring(1,7)
                    </td>
                    <td class="col-lg-2">
                        @reservation.CustomerName
                    </td>
                    <td class="col-lg-2">
                        @reservation.Date
                    </td>
                    <td class="col-lg-1">
                        @reservation.TotalGuests
                    </td>
                    <td class="col-lg-2">
                        @reservation.CustomerPhoneNumber
                    </td>
                    <td class="col-lg-2">
                        @reservation.ContactEmail
                    </td>
                    <td class="col-lg-1">
                        @Html.ActionLink("Cancel", "CancelReservation", null, new { id = reservation.Id, whoCanceled = "Restaurant" })
                    </td>
                </tr>
            }
        }
    </table>
    <strong><small>Old reservations</small></strong>
    <table class="table table-striped table-responsive table-condensed">
        <tr>
            <th>
                Order Nr.
            </th>
            <th>
                Name
            </th>
            <th>
                Date
            </th>
            <th>
                Guest's
            </th>
            <th>
                Phone
            </th>
            <th>
                Email
            </th>
            <th>
                Delete
            </th>
        </tr>
                @foreach (var reservation in Model.Restaurant.Reservations)
                {
                    if (reservation.Date < DateTime.Today)
                    {
                        <tr>
                            <td class="col-lg-1">
                                @Html.DisplayFor(modelItem => reservation.Id).ToString().Substring(1,7)
                            </td>
                            <td class="col-lg-2">
                                @reservation.CustomerName
                            </td>
                            <td class="col-lg-2">
                                @reservation.Date
                            </td>
                            <td class="col-lg-1">
                                @reservation.TotalGuests
                            </td>
                            <td class="col-lg-2">
                                @reservation.CustomerPhoneNumber
                            </td>
                            <td class="col-lg-2">
                                @reservation.ContactEmail
                            </td>
                            <td class="col-lg-1">
                                @Html.ActionLink("Delete", "DeleteReservation", null, new { id = reservation.Id }, new { onclick = "return confirm('Are you sure you wish to delete this reservation?');" })
                            </td>
                        </tr>
                    }
                }
    </table>
</div>